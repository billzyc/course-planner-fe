{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/bill.chen/Repo/studyplan-client/src/components/NewCourseModal/NewCourseModal.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useState, useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport checkProps from '@jam3/react-check-extra-props';\nimport classnames from 'classnames';\nimport axios from 'axios';\nimport { useCookies } from 'react-cookie';\nimport { useDispatch } from 'react-redux';\nimport styles from './NewCourseModal.module.scss';\n\nvar CloseSVG = function CloseSVG(props) {\n  return __jsx(\"svg\", props, __jsx(\"path\", {\n    d: \"M0 0h24v24H0V0z\",\n    fill: \"none\"\n  }), __jsx(\"path\", {\n    d: \"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z\"\n  }));\n};\n\n_c2 = CloseSVG;\nCloseSVG.defaultProps = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  height: \"24\",\n  viewBox: \"0 0 24 24\",\n  width: \"24\"\n};\nimport { API_ROUTES, apiBaseUrl, UW_API_ROUTES, KEYS } from '../../data/consts';\nimport copy from '../../data/copy.json';\n\nvar NewCourseModal = function NewCourseModal(_ref) {\n  _s();\n\n  var unassignedBoardRef = _ref.unassignedBoardRef,\n      fetchAllCourses = _ref.fetchAllCourses,\n      closeCourseModal = _ref.closeCourseModal;\n\n  var _useState = useState(''),\n      newCourseSubject = _useState[0],\n      setNewCourseSubject = _useState[1];\n\n  var _useState2 = useState(''),\n      newCourseNumber = _useState2[0],\n      setNewCourseNumber = _useState2[1];\n\n  var _useCookies = useCookies(['token']),\n      _useCookies2 = _slicedToArray(_useCookies, 1),\n      cookies = _useCookies2[0];\n\n  var dispatch = useDispatch();\n\n  var handleNewCourseSubject = function handleNewCourseSubject(e) {\n    setNewCourseSubject(e.currentTarget.value);\n  };\n\n  var handleNewCourseNumber = function handleNewCourseNumber(e) {\n    setNewCourseNumber(e.currentTarget.value);\n  };\n\n  var handleNewCourseSubmit = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var response, preReqs;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return axios.get(\"\".concat(UW_API_ROUTES.BASEURL).concat(newCourseSubject, \"/\").concat(newCourseNumber).concat(UW_API_ROUTES.PREREQ), {\n                params: {\n                  key: KEYS.UW\n                }\n              });\n\n            case 2:\n              response = _context.sent;\n              _context.next = 5;\n              return {\n                preReqs: response.data.data.prerequisites_parsed\n              };\n\n            case 5:\n              preReqs = _context.sent;\n              axios({\n                method: 'post',\n                data: {\n                  course_subject: newCourseSubject,\n                  course_number: newCourseNumber // reqs: JSON.stringify({ ...preReqs })\n\n                },\n                headers: {\n                  authorization: cookies.token\n                },\n                url: API_ROUTES.COURSE_ITEMS,\n                baseURL: apiBaseUrl\n              }).then(function (response) {\n                fetchAllCourses();\n                unassignedBoardRef.current.updateCourses();\n                setNewCourseSubject('');\n                setNewCourseNumber('');\n                closeCourseModal();\n              }).catch(function (error) {\n                console.log(error);\n                window.alert(copy.error.newCourse);\n              });\n\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleNewCourseSubmit() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(\"section\", {\n    className: classnames(styles.newCourseModal),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: styles.modalContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    className: styles.close,\n    onClick: function onClick() {\n      closeCourseModal();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }\n  }, __jsx(CloseSVG, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 11\n    }\n  })), __jsx(\"h4\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }\n  }, copy.newCourseModal.title), __jsx(\"input\", {\n    type: \"text\",\n    id: \"courseSubject\",\n    onChange: function onChange(e) {\n      handleNewCourseSubject(e);\n    },\n    placeholder: copy.newCourseModal.courseInput,\n    value: newCourseSubject,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }\n  }), __jsx(\"input\", {\n    type: \"text\",\n    id: \"courseNumber\",\n    onChange: function onChange(e) {\n      handleNewCourseNumber(e);\n    },\n    placeholder: copy.newCourseModal.numberInput,\n    value: newCourseNumber,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }\n  }), __jsx(\"button\", {\n    onClick: handleNewCourseSubmit,\n    className: styles.submit,\n    disabled: newCourseSubject && newCourseNumber ? false : true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 9\n    }\n  }, copy.newCourseModal.submit)));\n};\n\n_s(NewCourseModal, \"aNWaapFtmHoL7FVcQ3GcNl9dh9g=\", false, function () {\n  return [useCookies, useDispatch];\n});\n\n_c = NewCourseModal;\nNewCourseModal.propTypes = checkProps({});\nNewCourseModal.defaultProps = {};\nexport default NewCourseModal;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"NewCourseModal\");\n$RefreshReg$(_c2, \"CloseSVG\");","map":{"version":3,"sources":["/Users/bill.chen/Repo/studyplan-client/src/components/NewCourseModal/NewCourseModal.js"],"names":["React","useState","useCallback","PropTypes","checkProps","classnames","axios","useCookies","useDispatch","styles","CloseSVG","API_ROUTES","apiBaseUrl","UW_API_ROUTES","KEYS","copy","NewCourseModal","unassignedBoardRef","fetchAllCourses","closeCourseModal","newCourseSubject","setNewCourseSubject","newCourseNumber","setNewCourseNumber","cookies","dispatch","handleNewCourseSubject","e","currentTarget","value","handleNewCourseNumber","handleNewCourseSubmit","get","BASEURL","PREREQ","params","key","UW","response","preReqs","data","prerequisites_parsed","method","course_subject","course_number","headers","authorization","token","url","COURSE_ITEMS","baseURL","then","current","updateCourses","catch","error","console","log","window","alert","newCourse","newCourseModal","modalContainer","close","title","courseInput","numberInput","submit","propTypes","defaultProps"],"mappings":"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","sourcesContent":["import React, { useState, useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport checkProps from '@jam3/react-check-extra-props';\nimport classnames from 'classnames';\nimport axios from 'axios';\nimport { useCookies } from 'react-cookie';\nimport { useDispatch } from 'react-redux';\n\nimport styles from './NewCourseModal.module.scss';\n\nimport { ReactComponent as CloseSVG } from '../../assets/svgs/close.svg';\nimport { API_ROUTES, apiBaseUrl, UW_API_ROUTES, KEYS } from '../../data/consts';\nimport copy from '../../data/copy.json';\n\nconst NewCourseModal = ({ unassignedBoardRef, fetchAllCourses, closeCourseModal }) => {\n  const [newCourseSubject, setNewCourseSubject] = useState('');\n  const [newCourseNumber, setNewCourseNumber] = useState('');\n  const [cookies] = useCookies(['token']);\n\n  const dispatch = useDispatch();\n\n  const handleNewCourseSubject = (e) => {\n    setNewCourseSubject(e.currentTarget.value);\n  };\n\n  const handleNewCourseNumber = (e) => {\n    setNewCourseNumber(e.currentTarget.value);\n  };\n\n  const handleNewCourseSubmit = async () => {\n    const response = await axios.get(\n      `${UW_API_ROUTES.BASEURL}${newCourseSubject}/${newCourseNumber}${UW_API_ROUTES.PREREQ}`,\n      {\n        params: {\n          key: KEYS.UW\n        }\n      }\n    );\n\n    const preReqs = await { preReqs: response.data.data.prerequisites_parsed };\n\n    axios({\n      method: 'post',\n      data: {\n        course_subject: newCourseSubject,\n        course_number: newCourseNumber\n        // reqs: JSON.stringify({ ...preReqs })\n      },\n      headers: { authorization: cookies.token },\n      url: API_ROUTES.COURSE_ITEMS,\n      baseURL: apiBaseUrl\n    })\n      .then(function (response) {\n        fetchAllCourses();\n        unassignedBoardRef.current.updateCourses();\n        setNewCourseSubject('');\n        setNewCourseNumber('');\n        closeCourseModal();\n      })\n      .catch(function (error) {\n        console.log(error);\n        window.alert(copy.error.newCourse);\n      });\n  };\n\n  return (\n    <section className={classnames(styles.newCourseModal)}>\n      <div className={styles.modalContainer}>\n        <div\n          className={styles.close}\n          onClick={() => {\n            closeCourseModal();\n          }}\n        >\n          <CloseSVG />\n        </div>\n        <h4>{copy.newCourseModal.title}</h4>\n        <input\n          type=\"text\"\n          id=\"courseSubject\"\n          onChange={(e) => {\n            handleNewCourseSubject(e);\n          }}\n          placeholder={copy.newCourseModal.courseInput}\n          value={newCourseSubject}\n        />\n        <input\n          type=\"text\"\n          id=\"courseNumber\"\n          onChange={(e) => {\n            handleNewCourseNumber(e);\n          }}\n          placeholder={copy.newCourseModal.numberInput}\n          value={newCourseNumber}\n        />\n        <button\n          onClick={handleNewCourseSubmit}\n          className={styles.submit}\n          disabled={newCourseSubject && newCourseNumber ? false : true}\n        >\n          {copy.newCourseModal.submit}\n        </button>\n      </div>\n    </section>\n  );\n};\n\nNewCourseModal.propTypes = checkProps({});\n\nNewCourseModal.defaultProps = {};\n\nexport default NewCourseModal;\n"]},"metadata":{},"sourceType":"module"}