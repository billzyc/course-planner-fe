{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nvar __jsx = React.createElement;\nimport React, { useState, useCallback } from 'react';\nimport checkProps from '@jam3/react-check-extra-props';\nimport classnames from 'classnames';\nimport axios from 'axios';\nimport { useCookies } from 'react-cookie';\nimport { useDispatch } from 'react-redux';\nimport styles from './NewCourseModal.module.scss';\n\nvar CloseSVG = function CloseSVG(props) {\n  return __jsx(\"svg\", props, __jsx(\"path\", {\n    d: \"M0 0h24v24H0V0z\",\n    fill: \"none\"\n  }), __jsx(\"path\", {\n    d: \"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z\"\n  }));\n};\n\nCloseSVG.defaultProps = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  height: \"24\",\n  viewBox: \"0 0 24 24\",\n  width: \"24\"\n};\nimport { API_ROUTES, apiBaseUrl, UW_API_ROUTES, KEYS } from '../../data/consts';\nimport copy from '../../data/copy.json';\n\nvar NewCourseModal = function NewCourseModal(_ref) {\n  var unassignedBoardRef = _ref.unassignedBoardRef,\n      fetchAllCourses = _ref.fetchAllCourses,\n      closeCourseModal = _ref.closeCourseModal;\n\n  var _useState = useState(''),\n      newCourseSubject = _useState[0],\n      setNewCourseSubject = _useState[1];\n\n  var _useState2 = useState(''),\n      newCourseNumber = _useState2[0],\n      setNewCourseNumber = _useState2[1];\n\n  var _useCookies = useCookies(['token']),\n      _useCookies2 = _slicedToArray(_useCookies, 1),\n      cookies = _useCookies2[0];\n\n  var dispatch = useDispatch();\n\n  var handleNewCourseSubject = function handleNewCourseSubject(e) {\n    setNewCourseSubject(e.currentTarget.value);\n  };\n\n  var handleNewCourseNumber = function handleNewCourseNumber(e) {\n    setNewCourseNumber(e.currentTarget.value);\n  };\n\n  var handleNewCourseSubmit = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var response, preReqs;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return axios.get(\"\".concat(UW_API_ROUTES.BASEURL).concat(newCourseSubject, \"/\").concat(newCourseNumber).concat(UW_API_ROUTES.PREREQ), {\n                params: {\n                  key: KEYS.UW\n                }\n              });\n\n            case 2:\n              response = _context.sent;\n              _context.next = 5;\n              return {\n                preReqs: response.data.data.prerequisites_parsed\n              };\n\n            case 5:\n              preReqs = _context.sent;\n              axios({\n                method: 'post',\n                data: {\n                  course_subject: newCourseSubject,\n                  course_number: newCourseNumber // reqs: JSON.stringify({ ...preReqs })\n\n                },\n                headers: {\n                  authorization: cookies.token\n                },\n                url: API_ROUTES.COURSE_ITEMS,\n                baseURL: apiBaseUrl\n              }).then(function (response) {\n                fetchAllCourses();\n                unassignedBoardRef.current.updateCourses();\n                setNewCourseSubject('');\n                setNewCourseNumber('');\n                closeCourseModal();\n              }).catch(function (error) {\n                console.log(error);\n                window.alert(copy.error.newCourse);\n              });\n\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleNewCourseSubmit() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(\"section\", {\n    className: classnames(styles.newCourseModal)\n  }, __jsx(\"div\", {\n    className: styles.modalContainer\n  }, __jsx(\"div\", {\n    className: styles.close,\n    onClick: function onClick() {\n      closeCourseModal();\n    }\n  }, __jsx(CloseSVG, null)), __jsx(\"h4\", null, copy.newCourseModal.title), __jsx(\"input\", {\n    type: \"text\",\n    id: \"courseSubject\",\n    onChange: function onChange(e) {\n      handleNewCourseSubject(e);\n    },\n    placeholder: copy.newCourseModal.courseInput,\n    value: newCourseSubject\n  }), __jsx(\"input\", {\n    type: \"text\",\n    id: \"courseNumber\",\n    onChange: function onChange(e) {\n      handleNewCourseNumber(e);\n    },\n    placeholder: copy.newCourseModal.numberInput,\n    value: newCourseNumber\n  }), __jsx(\"button\", {\n    onClick: handleNewCourseSubmit,\n    className: styles.submit\n  }, copy.newCourseModal.submit)));\n};\n\nNewCourseModal.defaultProps = {};\nexport default NewCourseModal;","map":null,"metadata":{},"sourceType":"module"}