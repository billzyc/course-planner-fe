{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nvar __jsx = React.createElement;\nimport React, { useState, useCallback } from 'react';\nimport checkProps from '@jam3/react-check-extra-props';\nimport classnames from 'classnames';\nimport axios from 'axios';\nimport { useCookies } from 'react-cookie';\nimport { useDispatch } from 'react-redux';\nimport styles from './NewSemesterModal.module.scss';\n\nvar CloseSVG = function CloseSVG(props) {\n  return __jsx(\"svg\", props, __jsx(\"path\", {\n    d: \"M0 0h24v24H0V0z\",\n    fill: \"none\"\n  }), __jsx(\"path\", {\n    d: \"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z\"\n  }));\n};\n\nCloseSVG.defaultProps = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  height: \"24\",\n  viewBox: \"0 0 24 24\",\n  width: \"24\"\n};\nimport { TERM_KEYS } from '../../data/consts';\nimport { API_ROUTES, apiBaseUrl } from '../../data/consts';\nimport { addSemester } from '../../redux/modules/semester';\nimport copy from '../../data/copy.json';\nimport { closeModal } from '../../redux/modules/modal';\n\nfunction NewSemesterModal() {\n  var _useState = useState(''),\n      semesterYear = _useState[0],\n      setSemesterYear = _useState[1];\n\n  var _useState2 = useState(TERM_KEYS.FALL),\n      semesterTerm = _useState2[0],\n      setSemesterTerm = _useState2[1];\n\n  var _useCookies = useCookies(['token']),\n      _useCookies2 = _slicedToArray(_useCookies, 1),\n      cookies = _useCookies2[0];\n\n  var dispatch = useDispatch();\n\n  var handleYearChange = function handleYearChange(e) {\n    setSemesterYear(e.currentTarget.value);\n  };\n\n  var handleNewSemesterSubmit = useCallback(function () {\n    axios({\n      method: 'post',\n      headers: {\n        authorization: cookies.token\n      },\n      data: {\n        semester: \"\".concat(semesterYear, \"-\").concat(semesterTerm)\n      },\n      url: API_ROUTES.SEMESTERS,\n      baseURL: apiBaseUrl\n    }).then(function (response) {\n      var data = response.data;\n      dispatch(addSemester(data));\n      dispatch(closeModal());\n    }).catch(function (error) {\n      console.log(error);\n      window.alert(copy.error.newSemester);\n    });\n  }, [cookies.token, dispatch, semesterTerm, semesterYear]);\n  return __jsx(\"section\", {\n    className: classnames(styles.newSemesterModal)\n  }, __jsx(\"div\", {\n    className: styles.modalContainer\n  }, __jsx(\"div\", {\n    className: styles.close,\n    onClick: function onClick() {\n      dispatch(closeModal());\n    }\n  }, __jsx(CloseSVG, null)), __jsx(\"h4\", null, copy.newSemesterModal.title), __jsx(\"input\", {\n    type: \"text\",\n    id: \"year\",\n    onChange: function onChange(e) {\n      handleYearChange(e);\n    },\n    placeholder: copy.newSemesterModal.enterYear,\n    value: semesterYear\n  }), __jsx(\"select\", {\n    id: \"semesters\",\n    onChange: function onChange(e) {\n      return setSemesterTerm(e.target.value);\n    }\n  }, __jsx(\"option\", {\n    value: TERM_KEYS.FALL\n  }, TERM_KEYS.FALL), __jsx(\"option\", {\n    value: TERM_KEYS.WINTER\n  }, TERM_KEYS.WINTER), __jsx(\"option\", {\n    value: TERM_KEYS.SPRING\n  }, TERM_KEYS.SPRING)), __jsx(\"button\", {\n    onClick: function onClick() {\n      return handleNewSemesterSubmit();\n    },\n    className: \"\".concat(styles.submit, \" \").concat(semesterYear && semesterTerm ? false : styles.disabled),\n    disabled: semesterYear && semesterTerm ? false : true\n  }, copy.newSemesterModal.submit)));\n}\n\nNewSemesterModal.defaultProps = {};\nexport default NewSemesterModal;","map":null,"metadata":{},"sourceType":"module"}